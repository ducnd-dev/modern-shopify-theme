{% comment %}
  Pagination Snippet
  Displays pagination for collections, blog articles, search results, etc.
{% endcomment %}

{% liquid
  assign previous_label = 'pagination.previous' | t | default: 'Previous'
  assign next_label = 'pagination.next' | t | default: 'Next'
  assign page_label = 'pagination.page' | t | default: 'Page'
%}

{% if paginate.pages > 1 %}
  <nav class="pagination" role="navigation" aria-label="Pagination">
    <ul class="pagination-list">
      
      {% comment %} Previous Page {% endcomment %}
      {% if paginate.previous %}
        <li class="pagination-item pagination-item--prev">
          <a href="{{ paginate.previous.url }}" class="pagination-link pagination-link--prev" aria-label="{{ previous_label }}">
            <svg class="pagination-icon" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
              <path d="M10.5 3L5.5 8l5 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span class="pagination-text">{{ previous_label }}</span>
          </a>
        </li>
      {% else %}
        <li class="pagination-item pagination-item--prev pagination-item--disabled">
          <span class="pagination-link pagination-link--disabled" aria-label="{{ previous_label }}">
            <svg class="pagination-icon" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
              <path d="M10.5 3L5.5 8l5 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span class="pagination-text">{{ previous_label }}</span>
          </span>
        </li>
      {% endif %}

      {% comment %} Page Numbers {% endcomment %}
      {% for part in paginate.parts %}
        {% case part %}
          {% when 1 %}
            {% comment %} First page {% endcomment %}
            {% if part == paginate.current_page %}
              <li class="pagination-item pagination-item--current">
                <span class="pagination-link pagination-link--current" aria-label="{{ page_label }} {{ part }}" aria-current="page">
                  {{ part }}
                </span>
              </li>
            {% else %}
              <li class="pagination-item">
                <a href="{{ blog.url }}{% unless blog %}{{ collection.url }}{% endunless %}" class="pagination-link" aria-label="{{ page_label }} {{ part }}">
                  {{ part }}
                </a>
              </li>
            {% endif %}

          {% when paginate.pages %}
            {% comment %} Last page {% endcomment %}
            {% if part == paginate.current_page %}
              <li class="pagination-item pagination-item--current">
                <span class="pagination-link pagination-link--current" aria-label="{{ page_label }} {{ part }}" aria-current="page">
                  {{ part }}
                </span>
              </li>
            {% else %}
              <li class="pagination-item">
                <a href="{{ blog.url }}{% unless blog %}{{ collection.url }}{% endunless %}?page={{ part }}" class="pagination-link" aria-label="{{ page_label }} {{ part }}">
                  {{ part }}
                </a>
              </li>
            {% endif %}

          {% else %}
            {% comment %} Regular page or ellipsis {% endcomment %}
            {% if part == paginate.current_page %}
              <li class="pagination-item pagination-item--current">
                <span class="pagination-link pagination-link--current" aria-label="{{ page_label }} {{ part }}" aria-current="page">
                  {{ part }}
                </span>
              </li>
            {% elsif part == '&hellip;' %}
              <li class="pagination-item pagination-item--gap">
                <span class="pagination-link pagination-link--gap">{{ part }}</span>
              </li>
            {% else %}
              <li class="pagination-item">
                <a href="{{ blog.url }}{% unless blog %}{{ collection.url }}{% endunless %}?page={{ part }}" class="pagination-link" aria-label="{{ page_label }} {{ part }}">
                  {{ part }}
                </a>
              </li>
            {% endif %}
        {% endcase %}
      {% endfor %}

      {% comment %} Next Page {% endcomment %}
      {% if paginate.next %}
        <li class="pagination-item pagination-item--next">
          <a href="{{ paginate.next.url }}" class="pagination-link pagination-link--next" aria-label="{{ next_label }}">
            <span class="pagination-text">{{ next_label }}</span>
            <svg class="pagination-icon" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
              <path d="M5.5 3L10.5 8l-5 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
        </li>
      {% else %}
        <li class="pagination-item pagination-item--next pagination-item--disabled">
          <span class="pagination-link pagination-link--disabled" aria-label="{{ next_label }}">
            <span class="pagination-text">{{ next_label }}</span>
            <svg class="pagination-icon" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
              <path d="M5.5 3L10.5 8l-5 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </span>
        </li>
      {% endif %}

    </ul>

    {% comment %} Page Info {% endcomment %}
    <div class="pagination-info">
      <p class="pagination-summary">
        {{ 'pagination.showing' | t: 
          first: paginate.current_offset_first,
          last: paginate.current_offset_last,
          count: paginate.items
        | default: 'Showing {{ first }} - {{ last }} of {{ count }} results' }}
      </p>
    </div>
  </nav>
{% endif %}

<style>
  .pagination {
    margin: 2rem 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
  }
  
  .pagination-list {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    list-style: none;
    margin: 0;
    padding: 0;
    flex-wrap: wrap;
    justify-content: center;
  }
  
  .pagination-item {
    margin: 0;
  }
  
  .pagination-link {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 0.75rem;
    min-width: 2.5rem;
    height: 2.5rem;
    justify-content: center;
    border: 1px solid var(--color-border, #d1d5db);
    background: var(--color-background, #ffffff);
    color: var(--color-text, #374151);
    text-decoration: none;
    border-radius: 0.375rem;
    font-size: 0.875rem;
    font-weight: 500;
    transition: all 0.15s ease-in-out;
  }
  
  .pagination-link:hover:not(.pagination-link--disabled):not(.pagination-link--current) {
    background: var(--color-primary, #3b82f6);
    color: white;
    border-color: var(--color-primary, #3b82f6);
  }
  
  .pagination-link--current {
    background: var(--color-primary, #3b82f6);
    color: white;
    border-color: var(--color-primary, #3b82f6);
    cursor: default;
  }
  
  .pagination-link--disabled {
    opacity: 0.5;
    cursor: not-allowed;
    pointer-events: none;
  }
  
  .pagination-link--gap {
    border: none;
    background: transparent;
    cursor: default;
  }
  
  .pagination-icon {
    width: 1rem;
    height: 1rem;
    flex-shrink: 0;
  }
  
  .pagination-text {
    font-size: 0.875rem;
  }
  
  .pagination-info {
    text-align: center;
  }
  
  .pagination-summary {
    margin: 0;
    color: var(--color-text-muted, #6b7280);
    font-size: 0.875rem;
  }
  
  @media (max-width: 640px) {
    .pagination-text {
      display: none;
    }
    
    .pagination-link--prev,
    .pagination-link--next {
      min-width: 2.5rem;
    }
    
    .pagination-list {
      gap: 0.125rem;
    }
    
    .pagination-link {
      min-width: 2rem;
      height: 2rem;
      padding: 0.25rem 0.5rem;
      font-size: 0.75rem;
    }
  }
</style>